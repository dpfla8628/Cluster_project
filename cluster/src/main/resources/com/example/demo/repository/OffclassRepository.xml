<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.example.demo.repository.OffclassRepository">

	<insert id="create">
		insert into offclass
		(class_no, class_name, class_info, class_price, class_start, class_end, class_place, class_member_set, class_talk, category_no, creator_no) 
		values
		(offclass_seq.nextval, #{className}, #{classInfo}, #{classPrice}, #{classStart}, #{classEnd}, #{classPlace}, #{classMemberSet}, #{classTalk}, #{categoryNo}, #{creatorNo})
	</insert>

	<select id="categoryList" resultType="ClassCategory">
		<![CDATA[
			select category_no, category_big, category_small from classcategory where category_no > 0
		]]>			
	</select>

	<select id="classList" resultType="Offclass">
		<![CDATA[
			select * from offclass 
			where class_check = '검수완료' order by class_no desc
		]]>
	</select>

	<select id="checkList" resultType="Offclass">
		<![CDATA[
			select * from offclass 
			where class_check = '검수대기' or class_check = '반려' order by class_no desc
		]]>
	</select>

	<insert id="addImage">
		insert into class_image(fullname, class_no) values(#{fullName}, #{imageJoinNo})
	</insert>
	
	<select id="getImage" resultType="String">
		select fullname from class_image where class_no = #{classNo}
	</select>
	
	<select id="getClassNo" resultType="Integer">
		select offclass_seq.currval from dual
	</select>
</mapper>	
