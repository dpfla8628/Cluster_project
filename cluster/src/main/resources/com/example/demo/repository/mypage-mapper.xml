<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.demo.repository.MemberRepository">
	
	<select id="count" resultType="Integer">
		select count(*) from member m left outer join classorder co on m.member_no=co.member_no where m.member_no=#{memberNo}
	</select>
	
	<select id="list" resultType="Member">
		select * from member
	</select>
	
	<select id="read" resultType="Member">
		select * from member where member_no = #{memberNo}
	</select>
	
	<select id="readq" resultType="ClassQuestion">
		select * from classquestion  q left outer join offclass c on q.class_no=c.class_no where member_no=#{memberNo}
	</select>
	
	<select id="orderlist" resultType="ClassOrder">
		select * from classorder o left outer join offclass c on o.class_no=c.class_no where member_no=#{memberNo}
	</select>
	
	<select id="reviewlist" resultType="Review">
		select * from review r left outer join offclass c on r.class_no=c.class_no where member_no=#{memberNo}
	</select>
	
	<select id="reviewcheck" resultType="Review">
		select * from review r left outer join offclass c on r.class_no=c.class_no where review_no=#{reviewNo}
	</select>
	
	<update id="update">
		update member set member_nick= #{memberNick}, 
		member_phone = #{memberPhone} where member_no = #{memberNo}
	</update>
	
	<delete id="reviewremove">
		delete from review where review_no=#{reviewNo}
	</delete>
	
	<delete id="orderremove">
		delete from classorder where order_no=#{orderNo}
	</delete>
	
	<delete id="questionremove">
		delete from classquestion where classq_no=#{classqNo}
	</delete>
	
	<update id="reviewedit">
		update review set review_context= #{reviewContext} where review_no = #{reviewNo}
	</update>
	
</mapper>